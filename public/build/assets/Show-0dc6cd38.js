import{a as e,j as l,d as o,W as N,r as k,_ as p,n as w,F as d}from"./app-343a820e.js";import{A as z}from"./AuthenticatedLayout-797437c3.js";import{V as S}from"./Voting-3621b61d.js";import"./ApplicationLogo-2944ff99.js";import"./transition-2c3d7764.js";function _({posts:n,community_slug:t}){return e("div",{className:"w-full bg-white shadow-sm rounded-b-md dark:bg-gray-200",children:e("ul",{role:"list",className:"divide-y divide-slate-300 dark:divide-slate-700",children:n.data.map(({id:s,slug:i,upvotes:c})=>e("li",{className:"px-4 py-4",children:e("div",{className:"flex items-center space-x-4",children:l("div",{children:[e(o,{href:route("posts.show",[t,i]),className:"font-semibold hover:text-blue-700 dark:hover:text-indigo-300",children:i}),l("span",{className:"ml-2",children:[c," szavazattal"]})]})})},s))})})}function A(n){const{post:t,community:s,latest:i,can_update:c,can_delete:m}=N().props,[g,x]=k.useState(!1);console.log({post:t}),console.log({community:s}),console.log({latest:i}),console.log(c),console.log(m),console.log(t.data.comments),console.log(t.data.replies);const h=p({content:"",parent_id:null}),u=p({content:"",parent_id:""}),b=a=>{a.preventDefault(),h.post(route("posts.comments",[s.slug,t.data.slug]),{onSuccess:()=>h.reset("content")})},v=a=>r=>{r.preventDefault();const f=t.data.comments.find(y=>y.id===a);u.post(route("posts.comments.reply",[s.slug,t.data.slug,f.id]),{onSuccess:()=>{u.reset("content"),x(!1)}})};return l(z,{auth:n.auth,errors:n.errors,children:[e(w,{title:t.data.title}),l("section",{className:"flex flex-col md:flex-row m-2 p-2",children:[l("div",{className:"w-full md:w-8/12",children:[e("div",{className:"m-2 p-2 bg-white rounded dark:bg-gray-600",children:e("h2",{className:"font-semibold text-2xl text-black dark:text-gray-200",children:e(o,{href:route("community.show",s.slug),children:s.name})})}),l("div",{className:"m-2 p-2 bg-white rounded text-sm dark:bg-gray-600",children:[l("div",{className:"flex flex-col md:flex-row justify-between",children:[l("div",{className:"flex dark:text-gray-200",children:[e(S,{post:t.data.slug,upvotes:t.data.upvotes,votes:t.data.votes.length>0?t.data.votes[0].vote:0}),e("div",{className:"flex items-center justify-center",children:l("span",{className:"text-black dark:text-gray-200",children:[t.data.username," posztja ",t.data.created_at]})})]}),l("div",{children:[c?e(d,{children:e(o,{className:"hover:text-blue-500 text-slate-500 dark:text-gray-200 dark:hover:text-indigo-300",href:route("forums.posts.edit",[s.slug,t.data.slug]),children:"Szerkesztés"})}):e(d,{}),m?e(d,{children:e(o,{className:"hover:text-red-500 text-slate-500 ml-2 dark:text-gray-200 dark:hover:text-red-500",href:route("forums.posts.destroy",[s.slug,t.data.slug]),method:"delete",children:"Törlés"})}):e(d,{})]})]}),e("div",{}),e("h1",{className:"font-semibold text-2xl text-black ml-4 dark:text-gray-400",children:t.data.title}),e("p",{className:"text-slate-600 ml-4 mb-2 mt-1 dark:text-gray-300",children:t.data.description}),e("a",{onclick:"javascript;",href:t.data.url,className:"text-blue-500 font-semibold text-sm hover:text-blue-300 ml-4 mb-2 mt-1 dark:text-indigo-500 dark:hover:text-indigo-300",children:t.data.url}),e("hr",{}),e("div",{children:l("form",{className:"m-2 p-2 max-w-md",onSubmit:b,children:[l("div",{children:[e("label",{htmlFor:"comment",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Hozzászólás"}),e("textarea",{name:"content",id:"content",rows:"4",value:h.data.content,onChange:a=>h.setData("content",a.target.value),className:"rounded-lg block w-full text-sm p-2 text-gray-900 bg-gray-100 border dark:bg-slate-500 dark:text-gray-200"})]}),e("div",{className:"mt-4",children:e("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Hozzászólás"})})]})}),e("hr",{}),e("div",{children:e("ul",{role:"list",className:"divide-y divide-gray-200 m-2 p-2",children:t.data.comments.map(a=>e("li",{className:"py-4 flex",children:l("div",{className:"ml-3",children:[e("span",{className:"text-sm font-semibold text-gray-900 ml-1 dark:text-gray-400",children:a.username}),m?e(d,{children:e(o,{className:"ml-2 hover:text-red-500 text-slate-500 dark:text-gray-200 dark:hover:text-red-500",href:route("posts.comments.destroy",[s.slug,t.data.slug,a.id]),method:"delete",children:"Törlés"})}):e(d,{}),e("div",{className:"mt-2 text-sm text-gray-700 dark:text-gray-200",children:e("p",{className:"m-2 p-2",children:a.comment})}),e("div",{children:e("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-2",onClick:()=>x({...g,[a.id]:!g[a.id]}),children:"Válasz"})}),g[a.id]&&l("form",{onSubmit:v(a.id),children:[l("div",{children:[e("label",{htmlFor:`reply-${a.id}`,className:"block m-2 text-sm font-medium text-gray-900 dark:text-gray-400",children:"Válasz"}),e("textarea",{name:`reply-${a.id}`,id:`reply-${a.id}`,rows:"4",value:u.data.content,onChange:r=>u.setData("content",r.target.value),className:"rounded-lg block w-full text-sm p-2 text-gray-900 bg-gray-100 border"})]}),e("div",{className:"mt-4",children:e("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Küldés"})})]}),t.data.replies.map(r=>e("div",{className:"m-4",children:r.parent_id===a.id?e(d,{children:l("div",{children:[e("span",{className:"text-sm font-semibold text-gray-900 ml-1 dark:text-gray-400",children:r.username}),m?e(d,{children:e(o,{className:"ml-2 hover:text-red-500 text-slate-500 dark:text-gray-200 dark:hover:text-red-500",href:route("posts.comments.reply.destroy",[s.slug,t.data.slug,r.parent_id,r.id]),method:"delete",children:"Törlés"})}):e(d,{}),e("div",{className:"mt-2 text-sm text-gray-700 dark:text-gray-200",children:e("p",{className:"m-2 p-2",children:r.comment})})]})}):e(d,{})},r.id))]})},a.id))})}),e("hr",{})]})]}),l("div",{className:"w-full md:w-4/12 p-4",children:[e("div",{className:"p-2 bg-slate-500 text-white rounded-t-sm dark:bg-gray-600",children:e("h2",{children:"A fórumról"})}),e("div",{className:"rounded-b-sm",children:e("p",{className:"bg-white font-semibold p-2 mb-4 dark:bg-gray-200",children:s.description})}),e("div",{className:"p-2 bg-slate-500 text-white rounded-t-sm dark:bg-gray-600",children:l("h2",{children:["További posztok a ",s.name," fórumról"]})}),e(_,{posts:i,community_slug:s.slug})]})]})]})}export{A as default};
